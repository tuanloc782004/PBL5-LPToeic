<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Nhập OTP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" th:href="@{/login-form-asset/style.css}">
<style>
.otp-container {
	display: flex;
	justify-content: center;
	gap: 10px;
	margin: 30px 0;
}

.otp-input {
	width: 40px;
	height: 50px;
	font-size: 24px;
	text-align: center;
	border-radius: 8px;
	border: 1px solid #ccc;
	background-color: #eee;
	outline: none;
	transition: border 0.2s;
}

.otp-input:focus {
	border-color: #512da8;
	box-shadow: 0 0 3px rgba(81, 45, 168, 0.5);
}

.error-text {
	color: red;
	text-align: center;
}
</style>
</head>
<body>
	<div class="container" id="container">
		<form th:action="@{/verify-otp}" method="post"
			onsubmit="return collectOTP()">
			<h1>Nhập mã OTP</h1>
			<input type="hidden" name="email" th:value="${email}">
			<div class="otp-container">
				<input type="text" class="otp-input" maxlength="1"
					inputmode="numeric"> <input type="text" class="otp-input"
					maxlength="1" inputmode="numeric"> <input type="text"
					class="otp-input" maxlength="1" inputmode="numeric"> <input
					type="text" class="otp-input" maxlength="1" inputmode="numeric">
				<input type="text" class="otp-input" maxlength="1"
					inputmode="numeric"> <input type="text" class="otp-input"
					maxlength="1" inputmode="numeric">
			</div>
			<input type="hidden" id="otp" name="otp">
			<p class="error-text" th:text="${error}"></p>
			<button>Xác nhận</button>
		</form>
	</div>

	<script>
    const inputs = document.querySelectorAll('.otp-input');

    inputs.forEach((input, index) => {
        input.addEventListener('input', () => {
            if (input.value.length === 1 && index < inputs.length - 1) {
                inputs[index + 1].focus();
            }
        });

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Backspace' && !input.value && index > 0) {
                inputs[index - 1].focus();
            }
        });
    });

    function collectOTP() {
        const otp = Array.from(inputs).map(input => input.value).join('');
        document.getElementById('otp').value = otp;
        return true; // Cho phép submit
    }
  </script>
</body>
</html>
